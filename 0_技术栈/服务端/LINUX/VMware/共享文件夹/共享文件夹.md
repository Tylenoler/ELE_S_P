# 设置共享文件夹
虚拟机关机情况下，创建一个共享文件夹
![[0aa569ca1e73170f41ceeda0ffd94de5.png]]
共享文件夹是一种简单且高效的方法。首先，需要在虚拟机中开启共享文件夹功能。具体步骤如下：
1. 打开虚拟机，确保Ubuntu已经启动。
    
2. 依次点击“虚拟机” -> “设置” -> “选项” -> “共享文件夹”。
    
3. 选择“总是启动”，然后添加一个与主机Windows共享的路径。

设置完成后，共享文件夹在Ubuntu中的路径通常是_/mnt/hgfs/xxxxxxxx。在Windows和Ubuntu中都可以访问和修改该文件夹中的文件。
# 如果共享文件夹消失，使用以下方法
## 重新挂载共享文件夹
1. 如果之前已经挂载 hgfs，先取消挂载
```
sudo umount /mnt/hgfs
```
- uid与gid通过以下命令查询
```
id
```
![[Pasted image 20250122184330.png]]
2. 重新使用以下命令挂载
```
sudo /usr/bin/vmhgfs-fuse .host:/ /mnt/hgfs -o allow_other -o uid=0 -o gid=0 -o umask=022
```
将其中的uid与gid替换为自己的。如果报错`use the ‘nonempty’ mount option`，则使用下方命令：
```
sudo /usr/bin/vmhgfs-fuse .host:/ /mnt/hgfs -o nonempty -o allow_other -o uid=0 -o gid=0 -o umask=022
```
![[Pasted image 20250122184308.png]]
不过，这样设置之后，这样设置暂时有效，重启之后可能失效。
## 永久设置
**注意：永久设置之前，上面步骤能设置共享成功才行，不然看看评论区**
先使用下面命令提升权限，否则无法保存
```
sudo chmod 777 /etc/fstab
```
进入`/etc`目录打开`fstab`文件编辑末尾添加
```
.host:/ /mnt/hgfs fuse.vmhgfs-fuse allow_other,uid=0,gid=0,umask=022 0 0
```
uid与gid替换为自己的
![[a55043c785af724e7ccac49565857375.png]]
保存成功后重启虚拟机即可，共享文件夹永久不丢失。