# 移植步骤

1. **添加FreeRTOS源码**
	- 将FreeRTOS源码添加至基础工程、头文件路径等地方。
2. **FreeRTOS Config.h **
	- 添加FreeRTOS Config.h 配置文件
3. **修改SYSTEM文件**
	- 修改SYSTEM文件中的sys.c、delay.c、usart.c
4. **修改中断相关文件**
	- 修改Systick中断，SVC中断，PendSV中断
5. **添加应用程序**
	- 验证移植是否正确
# 具体
@使用文件：正点原子FreeRTOS开发指南
源码移植之前，需要使用一个可用工程作为蓝图。可以点灯的工程即可。后面过程中有部分代码修改涉及修改普通文件。
源码移植包括：
## 1. 移植FreeRTOS源码：
![[Pasted image 20250226214037.png]]
在portable中，基础版只需用到Keil，MemMang，RVDS三个文件夹，其余文件夹可以直接删掉。
![[Pasted image 20250226214257.png]]
RVDS中文件如下：（依据开发板芯片进行选择）
![[Pasted image 20250226214522.png]]
## 2. 将文件添加到工程
1. 新建`Middleware/FreeRTOS_CORE` 和`Middleware/FreeRTOS_PORT`两个文件夹
2. `FreeRTOS_CORE文件夹`用于存放内核C源码。将上一步骤中FREERTOS目录下所有的FREERTOS内核C源文件都添加到此文件夹中。
3. `FreeRTOS_PORT文件夹`用于存放内核移植文件。需要添加两个文件到这个分组，分别是heap_x.c（内存管理算法文件）(共有四个文件，选其一即可)和port.c（与硬件沟通的桥梁）（寻找对应自己开发板芯片类型的port文件加入即可）（位于RVDS文件夹中（如上图））
4. 最终效果：
	 ![[Pasted image 20250226215507.png]]
5. 添加头文件路径：
	![[Pasted image 20250226220322.png]]
6. 添加FreeRTOSConfig.h文件
	1. 途径一：用户自行编写
	2. 途径二：从FREERTOS内核的演示工程中获得，在Demo文件夹中找到FreeRTOSConfig.h
		![[Pasted image 20250226221956.png]]
	3. 途径三：直接找正点原子官方文件中的FreeRTOSConfig.h文件
7. 修改SYSTEM文件
	1. sys.h文件
		1. 将宏SYS_SUPPORT_OS定义为1
8. 

