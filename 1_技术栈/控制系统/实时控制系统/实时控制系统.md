**实时操作系统**（Real-time operating system, RTOS），又称**即时操作系统**，它会按照排序执行、管理系统资源，并为开发应用程序提供一致的基础。

实时操作系统与一般的[操作系统](https://zh.wikipedia.org/wiki/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F "操作系统")相比，最大的特色就是“实时性”，如果有一个任务需要执行，实时操作系统会马上（在较短时间内）执行该任务，不会有较长的延时。这种特性保证了各个任务的及时执行。
设计实时操作系统的首要目标不是高的[吞吐量](https://zh.wikipedia.org/wiki/%E5%90%9E%E5%90%90%E9%87%8F "吞吐量")，而是保证任务在特定时间内完成，因此衡量一个实时操作系统坚固性的重要指标，是系统从接收一个任务，到完成该任务所需的时间，其时间的变化称为[抖动](https://zh.wikipedia.org/wiki/%E5%AE%9E%E6%97%B6%E8%AE%A1%E7%AE%97 "实时计算")。可以依抖动将实时操作系统分为两种：硬实时操作系统及软实时操作系统，硬实时操作系统比软实时操作系统有更少的抖动：
- 硬实时操作系统**必须**使任务在确定的时间内完成。
- 软实时操作系统能让**绝大多数**任务在确定时间内完成。
实时操作系统与一般的操作系统有着不同的[调度](https://zh.wikipedia.org/wiki/%E6%8E%92%E7%A8%8B "调度")算法。普通的操作系统的调度器对于线程优先级等方面的处理更加灵活；而实时操作系统追求最小的[中断延时](https://zh.wikipedia.org/w/index.php?title=%E4%B8%AD%E6%96%AD%E5%BB%B6%E6%97%B6&action=edit&redlink=1)和[线程切换延时](https://zh.wikipedia.org/wiki/%E4%B8%8A%E4%B8%8B%E6%96%87%E4%BA%A4%E6%8F%9B "上下文切换")。
通常都会有最基础的[内核](https://zh.wikipedia.org/wiki/%E5%86%85%E6%A0%B8 "内核")，以及外加上去的模块，像是[文件系统](https://zh.wikipedia.org/wiki/%E6%AA%94%E6%A1%88%E7%B3%BB%E7%B5%B1 "文件系统")、[网络协议堆栈](https://zh.wikipedia.org/wiki/%E7%B6%B2%E8%B7%AF%E5%8D%94%E5%AE%9A%E5%A0%86%E7%96%8A "网络协议堆栈")和应用、设备驱动程序等模块。
RTOS的内核通常会有：[调度器](https://zh.wikipedia.org/wiki/%E6%8E%92%E7%A8%8B%E5%99%A8 "调度器")、[对象](https://zh.wikipedia.org/wiki/%E7%89%A9%E4%BB%B6_(%E9%9B%BB%E8%85%A6%E7%A7%91%E5%AD%B8) "对象 (计算机科学)")、[服务](https://zh.wikipedia.org/wiki/%E6%9C%8D%E5%8A%A1 "服务")。
# 设计理念
通常，实时操作系统分为两大类:
- 事件驱动型。当一个高优先级的任务需要执行时，系统会自动[切换](https://zh.wikipedia.org/wiki/%E4%B8%8A%E4%B8%8B%E6%96%87%E4%BA%A4%E6%8F%9B "上下文切换")到这个任务。这种根据优先级调度任务的方式称为[抢占式任务处理](https://zh.wikipedia.org/wiki/%E6%8A%A2%E5%8D%A0%E5%BC%8F%E4%BB%BB%E5%8A%A1%E5%A4%84%E7%90%86 "抢占式任务处理")。
- 时间触发型。每个任务在各自设定好的的时间间隔内重复、轮流调度。
时间触发型设计往往比较严格地调度任务，具有更好的[多任务处理](https://zh.wikipedia.org/wiki/%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%A4%84%E7%90%86 "多任务处理")能力。多个任务被不停地轮流调度，在宏观上，就相当于一个[CPU](https://zh.wikipedia.org/wiki/CPU "CPU")同时执行多个任务。
在过去，CPU在切换任务时往往需要多个[机器周期](https://zh.wikipedia.org/wiki/%E6%9C%BA%E5%99%A8%E5%91%A8%E6%9C%9F "机器周期")，在这段时间内，CPU不能处理其他任何任务。例如，一个20 MHz的[摩托罗拉68000](https://zh.wikipedia.org/wiki/%E6%91%A9%E6%89%98%E7%BD%97%E6%8B%8968000 "摩托罗拉68000")处理器（1980年代后期），在切换任务时需要花费20微秒。（相比之下，一个100 MHz的[ARM架构](https://zh.wikipedia.org/wiki/ARM%E6%9E%B6%E6%9E%84 "ARM架构")的处理器（2008年之后的）只需要3微秒。）因此，早期的实时操作系统通过减少任务切换次数来避免消耗过多CPU时间。
# 任务调度
在典型的设计中，一个任务有以下三种状态：
1. 正在运行（Running，正在CPU中执行）
2. 待命（Ready，等待执行）
3. 阻塞（Blocked，任务暂停，等待一个事件的发生，例如接收一组数据）
由于CPU在某个时间只能执行一个任务，大部分任务，在大部分时间，处于阻塞或待命状态。可能会有大量项目在待命列表里等待执行，这取决于系统所需的任务数量以及调度器的类型。
通常情况下，对于简单的时间触发式调度器来说，待命任务列表的数据结构的设计要尽可能缩短最坏情况下，程序在调度器关键部分的执行时间，以防止其他任务一直在待命列表中，无法及时执行。因此，在这种调度器中，应尽可能避免抢占式任务，甚至应该关闭调度器之外的所有中断。当然，待命任务列表的数据结构也应根据这个系统需要的最大任务数量做进一步的优化。
如果待命任务列表中的任务较多，[双向链表](https://zh.wikipedia.org/wiki/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8 "双向链表")是一个比较好的选择。如果待命任务列表通常包含少量任务，但偶尔会出现较多任务，任务应该根据优先级排序。这样一来，要寻找最高优先级的任务，就不必要在整个列表中一个一个地寻找。而插入任务需要从列表中的第一个任务开始，向后寻找，直到找到比要插入的任务优先级低的任务，然后插入到该任务之前；如果没有找到优先级更低的任务，就插入到任务列表末尾。
在寻找任务列表，准备插入任务的过程中，应该注意避免抢占。长的关键部分应分为多个小的部分分别执行。如果在寻找任务列表，要插入低优先级任务的时候，一个中断发生使高优先级任务进入待命状态，高优先级任务应该在低优先级任务被插入之前立刻被插入列表和执行。
在更先进的系统中，实时任务和许多非实时任务共享运算资源，这时候待命任务列表会变得很长。在这种系统中，待命任务列表可能不适合用链表的结构。
## 调度算法
一些实时操作系统中常用的算法：
- 合作式调度
- [抢占式调度](https://zh.wikipedia.org/wiki/%E6%8A%A2%E5%8D%A0%E5%BC%8F%E5%A4%9A%E4%BB%BB%E5%8A%A1%E5%A4%84%E7%90%86 "抢占式多任务处理")
    - [Rate-monotonic scheduling](https://zh.wikipedia.org/w/index.php?title=Rate-monotonic_scheduling&action=edit&redlink=1 "Rate-monotonic scheduling（页面不存在）")
    - [Round-robin scheduling](https://zh.wikipedia.org/wiki/Round-robin_scheduling "Round-robin scheduling")
    - [Fixed priority pre-emptive scheduling](https://zh.wikipedia.org/w/index.php?title=Fixed_priority_pre-emptive_scheduling&action=edit&redlink=1 "Fixed priority pre-emptive scheduling（页面不存在）"), an implementation of [preemptive time slicing](https://zh.wikipedia.org/w/index.php?title=Preemption_(computing)&action=edit&redlink=1 "Preemption (computing)（页面不存在）")
    - Fixed-Priority Scheduling with Deferred Preemption
    - Fixed-Priority Non-preemptive Scheduling
    - Critical section preemptive scheduling
    - Static time scheduling
- [Earliest Deadline First](https://zh.wikipedia.org/w/index.php?title=Earliest_deadline_first_scheduling&action=edit&redlink=1 "Earliest deadline first scheduling（页面不存在）") approach
- [Stochastic](https://zh.wikipedia.org/w/index.php?title=Stochastic&action=edit&redlink=1 "Stochastic（页面不存在）") [digraph](https://zh.wikipedia.org/w/index.php?title=Directed_graph&action=edit&redlink=1 "Directed graph（页面不存在）")s with [multi-threaded](https://zh.wikipedia.org/wiki/Thread_(computer_science) "Thread (computer science)") [graph traversal](https://zh.wikipedia.org/w/index.php?title=Tree_traversal&action=edit&redlink=1 "Tree traversal（页面不存在）")
# RTOS举例
WinCE、VxWorks、μC/OS-Ⅱ等运用较广。Linux是作为通用操作系统开发的，其内核在实时处理能力上先天不足，部分网络开发社区将其经过改造能在一定程度上成为实时操作系统。
### 开放源代码&免费
- [Raw-OS](https://zh.wikipedia.org/w/index.php?title=Raw-OS&action=edit&redlink=1 "Raw-OS（页面不存在）") (http://www.raw-os.org/)（[页面存档备份](https://web.archive.org/web/20140223055329/http://www.raw-os.org/)，存于[互联网档案馆](https://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%94%E7%BD%91%E6%A1%A3%E6%A1%88%E9%A6%86 "互联网档案馆")）
- [CoOS](https://zh.wikipedia.org/w/index.php?title=CoOS&action=edit&redlink=1 "CoOS（页面不存在）") [[2]](https://web.archive.org/web/20160426223735/http://www1.coocox.org/CoOS.htm)
### 开放源代码
- [SylixOS](https://zh.wikipedia.org/w/index.php?title=SylixOS&action=edit&redlink=1 "SylixOS（页面不存在）") [[3]](http://www.sylixos.com/)（[页面存档备份](https://web.archive.org/web/20200621120251/http://www.sylixos.com/)，存于[互联网档案馆](https://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%94%E7%BD%91%E6%A1%A3%E6%A1%88%E9%A6%86 "互联网档案馆")）
- [[RT-THREAD]]
- [eCos](https://zh.wikipedia.org/wiki/ECos "ECos")
- [Fiasco.OC](https://zh.wikipedia.org/w/index.php?title=Fiasco.OC&action=edit&redlink=1 "Fiasco.OC（页面不存在）") [[5]](http://os.inf.tu-dresden.de/fiasco/)（[页面存档备份](https://web.archive.org/web/20060925153623/http://os.inf.tu-dresden.de/fiasco/)，存于[互联网档案馆](https://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%94%E7%BD%91%E6%A1%A3%E6%A1%88%E9%A6%86 "互联网档案馆")）
- [FreeRTOS](https://zh.wikipedia.org/wiki/FreeRTOS "FreeRTOS") [[6]](https://www.freertos.org/)（[页面存档备份](https://web.archive.org/web/20180907110447/https://www.freertos.org/)，存于[互联网档案馆](https://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%94%E7%BD%91%E6%A1%A3%E6%A1%88%E9%A6%86 "互联网档案馆")）
- [Phoenix-RTOS](https://zh.wikipedia.org/w/index.php?title=Phoenix-RTOS&action=edit&redlink=1 "Phoenix-RTOS（页面不存在）")
- [Nut/OS](https://zh.wikipedia.org/w/index.php?title=Nut/OS&action=edit&redlink=1 "Nut/OS（页面不存在）") [[7]](http://www.ethernut.de/)（[页面存档备份](https://web.archive.org/web/20200914012247/http://www.ethernut.de/)，存于[互联网档案馆](https://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%94%E7%BD%91%E6%A1%A3%E6%A1%88%E9%A6%86 "互联网档案馆")）
- [Prex](https://zh.wikipedia.org/w/index.php?title=Prex&action=edit&redlink=1 "Prex（页面不存在）")
- [RTAI](https://zh.wikipedia.org/w/index.php?title=RTAI&action=edit&redlink=1 "RTAI（页面不存在）")
- [RTEMS](https://zh.wikipedia.org/wiki/RTEMS "RTEMS")
- [RTLinux](https://zh.wikipedia.org/wiki/RTLinux "RTLinux")
- [SHaRK](https://zh.wikipedia.org/w/index.php?title=SHaRK&action=edit&redlink=1 "SHaRK（页面不存在）") [[8]](http://shark.sssup.it/)（[页面存档备份](https://web.archive.org/web/20061019191629/http://shark.sssup.it/)，存于[互联网档案馆](https://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%94%E7%BD%91%E6%A1%A3%E6%A1%88%E9%A6%86 "互联网档案馆")）
- [TRON Project](https://zh.wikipedia.org/wiki/TRON "TRON")
- [Xenomai](https://zh.wikipedia.org/wiki/Xenomai "Xenomai") [[9]](https://web.archive.org/web/20070926231656/https://gna.org/projects/xenomai/)
- [CoOS](https://zh.wikipedia.org/w/index.php?title=CoOS&action=edit&redlink=1 "CoOS（页面不存在）") [[10]](https://web.archive.org/web/20131101071323/http://www.coocox.org/CoOS.htm)
- [One OS](https://zh.wikipedia.org/w/index.php?title=One_OS&action=edit&redlink=1 "One OS（页面不存在）") [[11]](https://github.com/EDI-Systems/M5P1_MuProkaron)（[页面存档备份](https://web.archive.org/web/20181015073025/http://github.com/EDI-Systems/M5P1_MuProkaron)，存于[互联网档案馆](https://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%94%E7%BD%91%E6%A1%A3%E6%A1%88%E9%A6%86 "互联网档案馆")）
- [ChibiOS](https://zh.wikipedia.org/w/index.php?title=ChibiOS&action=edit&redlink=1 "ChibiOS（页面不存在）")
### 非开放源代码
- [Ardence RTX](https://zh.wikipedia.org/w/index.php?title=Ardence&action=edit&redlink=1 "Ardence（页面不存在）")
- [BeOS](https://zh.wikipedia.org/wiki/BeOS "BeOS")
- [ChorusOS](https://zh.wikipedia.org/wiki/ChorusOS "ChorusOS")
- [DNIX](https://zh.wikipedia.org/w/index.php?title=DNIX&action=edit&redlink=1 "DNIX（页面不存在）")
- [DMERT](https://zh.wikipedia.org/w/index.php?title=DMERT&action=edit&redlink=1 "DMERT（页面不存在）")
- [e-Tkernel](https://zh.wikipedia.org/w/index.php?title=E-Tkernel&action=edit&redlink=1 "E-Tkernel（页面不存在）")
- [HOPEN OS](https://zh.wikipedia.org/w/index.php?title=HOPEN_OS&action=edit&redlink=1 "HOPEN OS（页面不存在）")
- [embOS (Segger)](https://zh.wikipedia.org/w/index.php?title=Segger_Microcontroller_Systems&action=edit&redlink=1 "Segger Microcontroller Systems（页面不存在）")
- [INTEGRITY](https://zh.wikipedia.org/wiki/INTEGRITY_(%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F) "INTEGRITY (操作系统)")
- [ITRON](https://zh.wikipedia.org/w/index.php?title=ITRON&action=edit&redlink=1 "ITRON（页面不存在）")
- [LynxOS](https://zh.wikipedia.org/wiki/LynxOS "LynxOS")
- [MERT](https://zh.wikipedia.org/w/index.php?title=MERT&action=edit&redlink=1 "MERT（页面不存在）")
- [MicroC/OS-II](https://zh.wikipedia.org/w/index.php?title=MicroC/OS-II&action=edit&redlink=1 "MicroC/OS-II（页面不存在）")
- [MQX RTOS](https://zh.wikipedia.org/w/index.php?title=MQX_RTOS&action=edit&redlink=1 "MQX RTOS（页面不存在）") [[12]](http://www.mqxembedded.com/)（[页面存档备份](https://web.archive.org/web/20080821002505/http://www.mqxembedded.com/)，存于[互联网档案馆](https://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%94%E7%BD%91%E6%A1%A3%E6%A1%88%E9%A6%86 "互联网档案馆")）
- [Nucleus](https://zh.wikipedia.org/wiki/Nucleus_RTOS "Nucleus RTOS")
- [OS-9](https://zh.wikipedia.org/w/index.php?title=OS-9&action=edit&redlink=1 "OS-9（页面不存在）")
- [OSE](https://zh.wikipedia.org/w/index.php?title=Operating_System_Embedded&action=edit&redlink=1 "Operating System Embedded（页面不存在）")
- [OSEK/VDX](https://zh.wikipedia.org/w/index.php?title=OSEK/VDX&action=edit&redlink=1 "OSEK/VDX（页面不存在）")
- [OSEKtime](https://zh.wikipedia.org/w/index.php?title=OSEKtime&action=edit&redlink=1 "OSEKtime（页面不存在）")
- [PDOS](https://zh.wikipedia.org/w/index.php?title=PDOS&action=edit&redlink=1 "PDOS（页面不存在）")
- [Phar Lap ETS](https://zh.wikipedia.org/w/index.php?title=Ardence&action=edit&redlink=1 "Ardence（页面不存在）")
- [PikeOS](https://zh.wikipedia.org/w/index.php?title=PikeOS&action=edit&redlink=1 "PikeOS（页面不存在）")
- [Portos](https://zh.wikipedia.org/w/index.php?title=Portos&action=edit&redlink=1 "Portos（页面不存在）")
- [pSOS](https://zh.wikipedia.org/w/index.php?title=PSOS&action=edit&redlink=1 "PSOS（页面不存在）")
- [QNX](https://zh.wikipedia.org/wiki/QNX "QNX")
- [RMX](https://zh.wikipedia.org/wiki/RMX "RMX")
- [RSX-11](https://zh.wikipedia.org/wiki/RSX-11 "RSX-11")
- [RT-11](https://zh.wikipedia.org/w/index.php?title=RT-11&action=edit&redlink=1 "RT-11（页面不存在）")
- [RTOS-UH](https://zh.wikipedia.org/w/index.php?title=RTOS-UH&action=edit&redlink=1 "RTOS-UH（页面不存在）")
- [RTXC](https://zh.wikipedia.org/w/index.php?title=RTXC&action=edit&redlink=1 "RTXC（页面不存在）")
- [Salvo RTOS](https://zh.wikipedia.org/w/index.php?title=Salvo_RTOS&action=edit&redlink=1 "Salvo RTOS（页面不存在）") [[13]](http://www.pumpkininc.com/)（[页面存档备份](https://web.archive.org/web/20200911134406/http://www.pumpkininc.com/)，存于[互联网档案馆](https://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%94%E7%BD%91%E6%A1%A3%E6%A1%88%E9%A6%86 "互联网档案馆")）
- [SINTRAN III](https://zh.wikipedia.org/w/index.php?title=SINTRAN_III&action=edit&redlink=1 "SINTRAN III（页面不存在）")
- [Symbian OS](https://zh.wikipedia.org/wiki/Symbian_OS "Symbian OS")
- [ThreadX](https://zh.wikipedia.org/w/index.php?title=Threadx&action=edit&redlink=1 "Threadx（页面不存在）")
- [VRTX](https://zh.wikipedia.org/wiki/VRTX "VRTX")
- [VxWorks](https://zh.wikipedia.org/wiki/VxWorks "VxWorks")
- [Windows CE](https://zh.wikipedia.org/wiki/Windows_CE "Windows CE")
- [µnOS](https://zh.wikipedia.org/w/index.php?title=%CE%9CnOS&action=edit&redlink=1 "ΜnOS（页面不存在）")
- [UNIX-RTR](https://zh.wikipedia.org/w/index.php?title=UNIX-RTR&action=edit&redlink=1 "UNIX-RTR（页面不存在）")
- [REX](https://zh.wikipedia.org/w/index.php?title=REX&action=edit&redlink=1 "REX（页面不存在）")
- [HP-1000/RTE](https://zh.wikipedia.org/w/index.php?title=HP-1000/RTE&action=edit&redlink=1 "HP-1000/RTE（页面不存在）") [[14]](https://web.archive.org/web/20060823221815/http://www.hp.com/products1/rte/tech_support/documentation/index.html)